<html>
<head>
	<title>tetris</title>
	<script src="./tetris-app.js"></script>
</head>
<body>
	<canvas id="game-board" width="500" height="600"></canvas>
	<script>
		var canvas = document.getElementById('game-board');
		var nextPieceCanvas = document.getElementById('next-piece-canvas');

		var gameModel = tetris.gameModelFactory({
		  rows: 20,
		  cols: 10,
		  squareModelFactory: tetris.squareModelFactory,
		  gamePieceFactory: tetris.pieceFactory
		});

		var gameView = viewFactory({
		  canvas: canvas,
		  model: gameModel
		});

		var controller = tetris.gameControllerFactory({
		  view: gameView,
		  model: gameModel,
		  freezePieceAfter: 2,
      manualMoveOnly: false,
      onActionTaken: function(gameBoard, clearedRows){
        console.log("cleared: " + clearedRows.length + " rows");
        console.log(gameBoard)
      }
		});

		controller.start();
	</script>
</body>
</html>
